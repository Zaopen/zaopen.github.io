---
layout: post
title: 冲正交易
date: 2019-08-02
tags: 交易
---

## 冲正
按照相关的标准，当POS刷卡设备发出一次扣款请求的时候，如果POS刷卡设备因为各种原因未能获得本次刷卡请求的结果，则需要发出一次“冲正”请求，冲正就是告诉服务器，如果刚才的交易成功了，就取消掉，然后返回冲正成功。如果没有成功，或者服务器也没发现有，那么就直接冲正成功。当然，如果交易成功，但是取消失败，那么服务器需要返回“冲正失败”，这个时候，就只能人工办理“退款”了。

## 来源
冲正的需求，是来自于“流水型系统”（我自己起的名字），什么叫流水型系统，就是所有的请求来了，直接处理，就像流水一样，直接走下去。比如说，POS服务器对于POS的支付请求，只要来了一个请求，它不问青红皂白，直接开始扣款。什么叫“不问青红皂白”，就是说，他不会管这个请求是不是重复的，以前是失败了还是成功了……
所以，如果请求方和服务器在扣钱的过程中出现了中断，那么请求方不知道是否成功的时候，就有可能已经扣款了，如果这个时候请求方不管不顾，再次发出请求，那么可能结果就是用户被多次扣款，引起投诉。所以，银联的POS标准就要求，只要POS设备请求扣款没有获得明确的结果，都必须发出“冲正请求”。没有款则以，有扣款就退掉。至于如果还要支付，那么再重新请求……

## 举例
>某天，你在中国银行ATM机上取款时，未正常吐钞，而接连收到的两条银行短信。
>第一条是，扣款信息。您的银行卡，在某日某月在ATM机取款支出3000元，余额为XXXX元；
>第二条是，冲正收入信息。您的银行卡，在某日某月冲正收入3000元，余额为XXXX元；
>这个情况，可以理解为：持卡人在进行相关交易操作后，取款的行为未能完成，但显示已扣款，随后银行做了更正分录，自动将储户余额加回去了。

_细小之处，也能进步。_

[<< 回首页](..)